{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Overview # Auto Backup is an Improved Backup Service for Home Assistant that can Automatically Remove Backups and Supports Generational Backup Schemes. While Home Assistant does provide built-in services for creating backups, they do not provide the ability to exclude items from a backup, or a way to automatically remove them, this custom component aims to fix that. Features # Provides more advanced and configurable service calls . Exclude addons/folders from a backup. Automatically delete backups after an individually specified amount of time. Download backups to a specified directory after completion (for example a usb drive). Allows the use of addon names instead of slugs . Provides a sensor to monitor the status of your backups. Creates events for when backups are started/created/failed/deleted. Supports generational backup schemes. Configuration # After installing Auto Backup via HACS , it can then be setup via the UI, by going to Configuration \u2192 Devices & Services \u2192 Add Integration \u2192 Auto Backup or by clicking the button below. Options # Option Description Automatically delete expired backups This option will automatically purge any expired backups when creating a new backup. Backup Timeout You can increase this value if you get timeout errors when creating a backup. This can happen with very large backups. Increasing this might make Auto Backup less reliable at monitoring backups to delete.","title":"Overview"},{"location":"#overview","text":"Auto Backup is an Improved Backup Service for Home Assistant that can Automatically Remove Backups and Supports Generational Backup Schemes. While Home Assistant does provide built-in services for creating backups, they do not provide the ability to exclude items from a backup, or a way to automatically remove them, this custom component aims to fix that.","title":"Overview"},{"location":"#features","text":"Provides more advanced and configurable service calls . Exclude addons/folders from a backup. Automatically delete backups after an individually specified amount of time. Download backups to a specified directory after completion (for example a usb drive). Allows the use of addon names instead of slugs . Provides a sensor to monitor the status of your backups. Creates events for when backups are started/created/failed/deleted. Supports generational backup schemes.","title":"Features"},{"location":"#configuration","text":"After installing Auto Backup via HACS , it can then be setup via the UI, by going to Configuration \u2192 Devices & Services \u2192 Add Integration \u2192 Auto Backup or by clicking the button below.","title":"Configuration"},{"location":"#options","text":"Option Description Automatically delete expired backups This option will automatically purge any expired backups when creating a new backup. Backup Timeout You can increase this value if you get timeout errors when creating a backup. This can happen with very large backups. Increasing this might make Auto Backup less reliable at monitoring backups to delete.","title":"Options"},{"location":"advanced-examples/","text":"Advanced Examples # Generational Backups # Blueprint Create backups each day and keep them for a configurable amount of time, backups are stored less frequently the older they are. Preface # Generational backups allow you to store backups over a long period of time while still having frequent enough backups to be useful for recovery. This is done by reducing the frequency of backups as they get older. Personally I take a backup of the Home Assistant configuration every 3 hours for the first 2 days, then full backups each day for a week, and finally each week for a month. For example, lets say my database has corrupted and I want to restore it. If it has been less than 48 hours since it corrupted then I can restore to the exact point before it corrupted with an inaccuracy of at most 3 hours (if you're monitoring trends you don't want to lose hours worth of data, so an average accuracy of 1.5 is pretty good), If 48 hours have passed then I can restore to any point with a maximum inaccuracy of 1 day (average accuracy of 12 hours) over the past 7 days (excluding the two where the db was corrupted). Over a week I can restore to any point \u00b11 week over the past 3 weeks, while \u00b11 week isn't very useful for restoring a database, it can be useful for subtle thing you don't notice, like if you accidentally deleted something. This is substantially more efficient than storing a backup every 3 hours for a month, and while you lose some accuracy as the backups get older, most failures (if they even occur) will be noticed within 48 hours, Also, most things other than your database don't change that often so a 4-week-old backup of your home assistant config may be the same as 1 day old backup. Also in my case the 3 hourly backup only backs up the important files to save on storage, whereas my daily/weekly backups are full backups. Of course, you can tweak these values to your liking, or even add a month/yearly backup schedule . Automations # Partial backup every 3 hours - alias : \"AutoBackup: Hourly Backup\" trigger : # (1) platform : time_pattern hours : \"/3\" action : # partial backup to save storage service : auto_backup.backup_partial data : name : \"AutoBackup: {{ now().strftime('%a, %-I:%M %p (%d/%m/%Y)') }}\" addons : - core_mariadb - core_mosquitto folders : - homeassistant - share - ssl keep_days : 2 Automation triggers on every 3rd hour. Full backup every day except Mondays - alias : \"AutoBackup: Daily Backup\" trigger : platform : time at : \"02:30:00\" condition : condition : time weekday : - tue - wed - thu - fri - sat - sun action : service : auto_backup.backup_full data : name : \"DailyBackup: {{ now().strftime('%A, %B %-d, %Y') }}\" keep_days : 7 Full backup every Monday - alias : \"AutoBackup: Weekly Backup\" trigger : platform : time at : \"02:30:00\" condition : condition : time weekday : - mon action : service : auto_backup.backup_full data : name : \"WeeklyBackup: {{ now().strftime('%A, %B %-d, %Y') }}\" # store backup for a month # i.e. backup each week and store for 4 weeks keep_days : 28","title":"Advanced Examples"},{"location":"advanced-examples/#advanced-examples","text":"","title":"Advanced Examples"},{"location":"advanced-examples/#generational-backups","text":"Blueprint Create backups each day and keep them for a configurable amount of time, backups are stored less frequently the older they are.","title":"Generational Backups"},{"location":"advanced-examples/#preface","text":"Generational backups allow you to store backups over a long period of time while still having frequent enough backups to be useful for recovery. This is done by reducing the frequency of backups as they get older. Personally I take a backup of the Home Assistant configuration every 3 hours for the first 2 days, then full backups each day for a week, and finally each week for a month. For example, lets say my database has corrupted and I want to restore it. If it has been less than 48 hours since it corrupted then I can restore to the exact point before it corrupted with an inaccuracy of at most 3 hours (if you're monitoring trends you don't want to lose hours worth of data, so an average accuracy of 1.5 is pretty good), If 48 hours have passed then I can restore to any point with a maximum inaccuracy of 1 day (average accuracy of 12 hours) over the past 7 days (excluding the two where the db was corrupted). Over a week I can restore to any point \u00b11 week over the past 3 weeks, while \u00b11 week isn't very useful for restoring a database, it can be useful for subtle thing you don't notice, like if you accidentally deleted something. This is substantially more efficient than storing a backup every 3 hours for a month, and while you lose some accuracy as the backups get older, most failures (if they even occur) will be noticed within 48 hours, Also, most things other than your database don't change that often so a 4-week-old backup of your home assistant config may be the same as 1 day old backup. Also in my case the 3 hourly backup only backs up the important files to save on storage, whereas my daily/weekly backups are full backups. Of course, you can tweak these values to your liking, or even add a month/yearly backup schedule .","title":"Preface"},{"location":"advanced-examples/#automations","text":"Partial backup every 3 hours - alias : \"AutoBackup: Hourly Backup\" trigger : # (1) platform : time_pattern hours : \"/3\" action : # partial backup to save storage service : auto_backup.backup_partial data : name : \"AutoBackup: {{ now().strftime('%a, %-I:%M %p (%d/%m/%Y)') }}\" addons : - core_mariadb - core_mosquitto folders : - homeassistant - share - ssl keep_days : 2 Automation triggers on every 3rd hour. Full backup every day except Mondays - alias : \"AutoBackup: Daily Backup\" trigger : platform : time at : \"02:30:00\" condition : condition : time weekday : - tue - wed - thu - fri - sat - sun action : service : auto_backup.backup_full data : name : \"DailyBackup: {{ now().strftime('%A, %B %-d, %Y') }}\" keep_days : 7 Full backup every Monday - alias : \"AutoBackup: Weekly Backup\" trigger : platform : time at : \"02:30:00\" condition : condition : time weekday : - mon action : service : auto_backup.backup_full data : name : \"WeeklyBackup: {{ now().strftime('%A, %B %-d, %Y') }}\" # store backup for a month # i.e. backup each week and store for 4 weeks keep_days : 28","title":"Automations"},{"location":"events/","text":"Event Event Data auto_backup.backup_start { \"name\" : \"NAME\" } auto_backup.backup_successful { \"name\" : \"NAME\" , \"slug\" : \"SLUG\" } auto_backup.backup_failed { \"name\" : \"NAME\" , \"error\" : \"ERROR\" } auto_backup.purged_backups { \"backups\" : [ \"SLUG\" ]} Example Automation Using Events # Blueprint Send notifications based on events created by the Auto Backup integration, such as when a backup fails. Notify on Backup Failure - alias : \"Notify Backup Failure\" trigger : platform : event event_type : auto_backup.backup_failed # (1) action : service : persistent_notification.create # (2) data : title : \"Backup Failed.\" message : |- Name: {{ trigger.event.data.name }} Error: {{ trigger.event.data.error }} We listen for the auto_backup.backup_failed event. Create a persistent notification on failure with the backups name and the error.","title":"Events"},{"location":"events/#example-automation-using-events","text":"Blueprint Send notifications based on events created by the Auto Backup integration, such as when a backup fails. Notify on Backup Failure - alias : \"Notify Backup Failure\" trigger : platform : event event_type : auto_backup.backup_failed # (1) action : service : persistent_notification.create # (2) data : title : \"Backup Failed.\" message : |- Name: {{ trigger.event.data.name }} Error: {{ trigger.event.data.error }} We listen for the auto_backup.backup_failed event. Create a persistent notification on failure with the backups name and the error.","title":"Example Automation Using Events"},{"location":"examples/","text":"Send a notification on backup failure # Blueprint Send notifications based on events created by the Auto Backup integration, such as when a backup fails. Notify on Backup Failure - alias : \"Notify Backup Failure\" trigger : platform : event event_type : auto_backup.backup_failed # (1) action : service : persistent_notification.create # (2) data : title : \"Backup Failed.\" message : |- Name: {{ trigger.event.data.name }} Error: {{ trigger.event.data.error }} We listen for the auto_backup.backup_failed event. Create a persistent notification on failure with the backups name and the error. Scheduling automatic backups # Blueprint Create backups each day and keep them for a configurable amount of time, backups are stored less frequently the older they are. Perform a partial backup of the Home Assistant config folder, mariadb and mosquitto every 3 hours, and store each backup for 2 days. Automatic Backups - alias : Automatic Backup trigger : # (1) - platform : time_pattern hours : \"/3\" action : - service : auto_backup.backup_partial data : name : \"AutoBackup: {{ now().strftime('%a, %-I:%M %p (%d/%m/%Y)') }}\" addons : - almond - Glances - mosquitto broker - core_mariadb folders : - homeassistant - Share - ssl - Local add-ons keep_days : 2 Automation triggers on every 3rd hour. Excluding addons/folders from a backup # Exclude from Backup - alias : Perform Daily Backup trigger : - platform : time at : \"00:00:00\" action : - service : auto_backup.backup_full data : name : \"DailyBackup: {{ now().strftime('%A, %B %-d, %Y') }}\" keep_days : 7 exclude : addons : - Portainer folders : - Local add-ons - share","title":"Examples"},{"location":"examples/#send-a-notification-on-backup-failure","text":"Blueprint Send notifications based on events created by the Auto Backup integration, such as when a backup fails. Notify on Backup Failure - alias : \"Notify Backup Failure\" trigger : platform : event event_type : auto_backup.backup_failed # (1) action : service : persistent_notification.create # (2) data : title : \"Backup Failed.\" message : |- Name: {{ trigger.event.data.name }} Error: {{ trigger.event.data.error }} We listen for the auto_backup.backup_failed event. Create a persistent notification on failure with the backups name and the error.","title":"Send a notification on backup failure"},{"location":"examples/#scheduling-automatic-backups","text":"Blueprint Create backups each day and keep them for a configurable amount of time, backups are stored less frequently the older they are. Perform a partial backup of the Home Assistant config folder, mariadb and mosquitto every 3 hours, and store each backup for 2 days. Automatic Backups - alias : Automatic Backup trigger : # (1) - platform : time_pattern hours : \"/3\" action : - service : auto_backup.backup_partial data : name : \"AutoBackup: {{ now().strftime('%a, %-I:%M %p (%d/%m/%Y)') }}\" addons : - almond - Glances - mosquitto broker - core_mariadb folders : - homeassistant - Share - ssl - Local add-ons keep_days : 2 Automation triggers on every 3rd hour.","title":"Scheduling automatic backups"},{"location":"examples/#excluding-addonsfolders-from-a-backup","text":"Exclude from Backup - alias : Perform Daily Backup trigger : - platform : time at : \"00:00:00\" action : - service : auto_backup.backup_full data : name : \"DailyBackup: {{ now().strftime('%A, %B %-d, %Y') }}\" keep_days : 7 exclude : addons : - Portainer folders : - Local add-ons - share","title":"Excluding addons/folders from a backup"},{"location":"home-assistant-core/","text":"Home Assistant Core # To use Auto Backup on Home Assistant Core you will need to have the backup integration loaded, if you are already using default_config (enabled by default) then this will already be loaded. Note Currently, you cannot configure the backup password , this may change in the future, but is due to the built-in backup integration not providing this option. Additionally, the addons and folders options are irrelevant for Home Assistant Core users. Warning Currently, the name option is not natively supported on Home Assistant Core. Auto Backup, however, provides a patch that enables this functionality through its service calls. The patch is only temporarily enabled when attempting to create a backup with a custom name, if you do not specify the name field for any of Auto Backup's services the patch wont be applied. This is an experimental feature, and while the implementation is fairly robust if you experience any issues you can stop using the name field and report an issue on GitHub.","title":"Home Assistant Core"},{"location":"home-assistant-core/#home-assistant-core","text":"To use Auto Backup on Home Assistant Core you will need to have the backup integration loaded, if you are already using default_config (enabled by default) then this will already be loaded. Note Currently, you cannot configure the backup password , this may change in the future, but is due to the built-in backup integration not providing this option. Additionally, the addons and folders options are irrelevant for Home Assistant Core users. Warning Currently, the name option is not natively supported on Home Assistant Core. Auto Backup, however, provides a patch that enables this functionality through its service calls. The patch is only temporarily enabled when attempting to create a backup with a custom name, if you do not specify the name field for any of Auto Backup's services the patch wont be applied. This is an experimental feature, and while the implementation is fairly robust if you experience any issues you can stop using the name field and report an issue on GitHub.","title":"Home Assistant Core"},{"location":"home-assistant-supervised/","text":"Home Assistant Supervised # Limitations # Stability (Timeouts) # When using Home Assistant Supervised, Auto Backup must make a request to the Supervisor to create a backup and has to keep that request open until the backup completes, at which point the backups unique id (slug) is returned. This can create stability issues when backups take a long time to create, e.g. 20 minutes+, as the request may fail and Auto Backup will not know the id of the backup to monitor for completion or deletion. In this case, the backup will still be created. By default, Auto Backup will assume a backup failed if it takes longer than 20 minutes. You can increase this limit using the \"Backup Timeout\" option, but you may run into reliability issues. Include / Exclude # The scope of the include and exclude options are limited by what Home Assistant allows, you can only include or exclude addons and the base folders like config , share , media , but not subdirectories of them.","title":"Home Assistant Supervised"},{"location":"home-assistant-supervised/#home-assistant-supervised","text":"","title":"Home Assistant Supervised"},{"location":"home-assistant-supervised/#limitations","text":"","title":"Limitations"},{"location":"home-assistant-supervised/#stability-timeouts","text":"When using Home Assistant Supervised, Auto Backup must make a request to the Supervisor to create a backup and has to keep that request open until the backup completes, at which point the backups unique id (slug) is returned. This can create stability issues when backups take a long time to create, e.g. 20 minutes+, as the request may fail and Auto Backup will not know the id of the backup to monitor for completion or deletion. In this case, the backup will still be created. By default, Auto Backup will assume a backup failed if it takes longer than 20 minutes. You can increase this limit using the \"Backup Timeout\" option, but you may run into reliability issues.","title":"Stability (Timeouts)"},{"location":"home-assistant-supervised/#include-exclude","text":"The scope of the include and exclude options are limited by what Home Assistant allows, you can only include or exclude addons and the base folders like config , share , media , but not subdirectories of them.","title":"Include / Exclude"},{"location":"sensors/","text":"The built-in sensor can be used to monitor the status of your backups.","title":"Sensors"},{"location":"services/","text":"Services # Services are the core of Auto Backup, they are the only methods that cause Auto Backup to do anything. auto_backup.backup # Create a full or partial backup. This is the primary method and includes the functionality of the backup_full and backup_partial services. Parameter Description Type Example name Optional name, defaults to the current date and time. string Automatic Backup {{ now () .strftime ( '%Y-%m-%d' ) }} include_addons List of addons to include in the backup (name or slug). Wildcards supported for slugs. list [ \"Almond\" , \"glances\" , \"core_mariadb\" , \"core_*\" ] include_folders List of folders to include in the backup. list [ \"Local add-ons\" , \"homeassistant\" , \"share\" ] exclude_addons List of addons to exclude from the backup (name or slug). Wildcards supported for slugs. list [ \"Almond\" , \"glances\" , \"core_mariadb\" , \"core_*\" ] exclude_folders List of folders to exclude from the backup. list [ \"Local add-ons\" , \"homeassistant\" , \"share\" ] password Optional password to secure backup. string 1234 keep_days The number of days to keep the backup. float 2 download_path Locations to download the backup to after creation. list [ \"/usb_drive\" ] Create a full backup service : auto_backup.backup data : name : \"Full Backup\" keep_days : 2 Create a partial backup Partial backup including just the config folder service : auto_backup.backup data : name : \"Partial Backup\" include_folders : - config keep_days : 2 Create an empty partial backup service : auto_backup.backup data : name : \"Partial Backup\" include : {} keep_days : 2 Alternate include/exclude config service : auto_backup.backup data : name : \"Partial Backup\" include : addons : [ ... ] folders : [ ... ] exclude : addons : [ ... ] folders : [ ... ] keep_days : 2 Addon and folder names # Addon names are case-insensitive and can be the addon name/title, these are the same names seen when creating a partial backup through the Supervisor backups page. They can also be the addons slug (slug must be lowercase). You can also use wildcards for matching slugs, such as core_* to include all core addons. Folder names are also case-insensitive and use the names seen when creating a partial backup through the Supervisor backups page. Currently, accepted values are (ignoring case): ssl share media addons or local add-ons or addons/local config or home assistant configuration or homeassistant Keep Days # The keep_days parameter allows you to specify how long the backup should be kept for before being deleted. Default is forever. You can specify a float value for keep days, e.g. to keep a backup for 12 hours use 0.5 . Download Path # The download_path parameter allows you to specify a location or of list of locations to download the backup to after creation. This directory must be accessible from Home Assistant. If you are running in docker your paths will be relative to the container for example your Home Assistant configuration directory is stored under /config and the share folder is under /share . Tip The backup will still be stored under /backup and show up on the backups page, it will only be copied/downloaded to the location specified, to immediately delete the backup use a negative value for keep_days (e.g. keep_days : -1 ). Info A slugified version of the backups name will be used for the filename, if a file with that name already exists the backups id (slug) will be used instead. Note When running on Home Assistant Core backups will be copied not downloaded. When running Home Assistant Supervised integrations do not have direct access to the /backup folder, which is why the backup is downloaded and not simply copied. auto_backup.backup_full # Create a full backup with optional exclusions. Parameter Description Type Example name Optional name, defaults to the current date and time. string Automatic Backup {{ now () .strftime ( '%Y-%m-%d' ) }} exclude Addons/Folders to exclude from the backup. Exclude Object { \"addons\" : [ \"MariaDB\" ], \"folders\" : [ \"Local add-ons\" , \"share\" ]} password Optional password to secure backup. string 1234 keep_days The number of days to keep the backup. float 2 download_path Locations to download the backup to after creation. list [ \"/usb_drive\" ] Exclude Object # Parameter Description Type Example addons List of addons to exclude from the backup (name or slug). list [ \"Almond\" , \"glances\" , \"core_mariadb\" ] folders List of folders to exclude from the backup. list [ \"Local add-ons\" , \"homeassistant\" , \"share\" ] auto_backup.backup_partial # Create a partial backup. Parameter Description Type Example name Optional name, defaults to the current date and time. string Automatic Backup {{ now () .strftime ( '%Y-%m-%d' ) }} addons List of addons to backup (name or slug). list [ \"Almond\" , \"glances\" , \"core_mariadb\" ] folders List of folders to backup. list [ \"Local add-ons\" , \"homeassistant\" , \"share\" ] password Optional password to secure backup. string 1234 keep_days The number of days to keep the backup. float 2 download_path Locations to download the backup to after creation. list [ \"/usb_drive\" ] auto_backup.purge # Purge expired backups. There are no parameters here, just call the service, and it will remove any expired backups. This service is useful if you want to manually specify when to purge backups, such as doing a batch delete at 12AM. Info Expired backups are automatically purged when creating new backups, this can be disabled in the options menu .","title":"Services"},{"location":"services/#services","text":"Services are the core of Auto Backup, they are the only methods that cause Auto Backup to do anything.","title":"Services"},{"location":"services/#auto_backupbackup","text":"Create a full or partial backup. This is the primary method and includes the functionality of the backup_full and backup_partial services. Parameter Description Type Example name Optional name, defaults to the current date and time. string Automatic Backup {{ now () .strftime ( '%Y-%m-%d' ) }} include_addons List of addons to include in the backup (name or slug). Wildcards supported for slugs. list [ \"Almond\" , \"glances\" , \"core_mariadb\" , \"core_*\" ] include_folders List of folders to include in the backup. list [ \"Local add-ons\" , \"homeassistant\" , \"share\" ] exclude_addons List of addons to exclude from the backup (name or slug). Wildcards supported for slugs. list [ \"Almond\" , \"glances\" , \"core_mariadb\" , \"core_*\" ] exclude_folders List of folders to exclude from the backup. list [ \"Local add-ons\" , \"homeassistant\" , \"share\" ] password Optional password to secure backup. string 1234 keep_days The number of days to keep the backup. float 2 download_path Locations to download the backup to after creation. list [ \"/usb_drive\" ] Create a full backup service : auto_backup.backup data : name : \"Full Backup\" keep_days : 2 Create a partial backup Partial backup including just the config folder service : auto_backup.backup data : name : \"Partial Backup\" include_folders : - config keep_days : 2 Create an empty partial backup service : auto_backup.backup data : name : \"Partial Backup\" include : {} keep_days : 2 Alternate include/exclude config service : auto_backup.backup data : name : \"Partial Backup\" include : addons : [ ... ] folders : [ ... ] exclude : addons : [ ... ] folders : [ ... ] keep_days : 2","title":"auto_backup.backup"},{"location":"services/#addon-and-folder-names","text":"Addon names are case-insensitive and can be the addon name/title, these are the same names seen when creating a partial backup through the Supervisor backups page. They can also be the addons slug (slug must be lowercase). You can also use wildcards for matching slugs, such as core_* to include all core addons. Folder names are also case-insensitive and use the names seen when creating a partial backup through the Supervisor backups page. Currently, accepted values are (ignoring case): ssl share media addons or local add-ons or addons/local config or home assistant configuration or homeassistant","title":"Addon and folder names"},{"location":"services/#keep-days","text":"The keep_days parameter allows you to specify how long the backup should be kept for before being deleted. Default is forever. You can specify a float value for keep days, e.g. to keep a backup for 12 hours use 0.5 .","title":"Keep Days"},{"location":"services/#download-path","text":"The download_path parameter allows you to specify a location or of list of locations to download the backup to after creation. This directory must be accessible from Home Assistant. If you are running in docker your paths will be relative to the container for example your Home Assistant configuration directory is stored under /config and the share folder is under /share . Tip The backup will still be stored under /backup and show up on the backups page, it will only be copied/downloaded to the location specified, to immediately delete the backup use a negative value for keep_days (e.g. keep_days : -1 ). Info A slugified version of the backups name will be used for the filename, if a file with that name already exists the backups id (slug) will be used instead. Note When running on Home Assistant Core backups will be copied not downloaded. When running Home Assistant Supervised integrations do not have direct access to the /backup folder, which is why the backup is downloaded and not simply copied.","title":"Download Path"},{"location":"services/#auto_backupbackup_full","text":"Create a full backup with optional exclusions. Parameter Description Type Example name Optional name, defaults to the current date and time. string Automatic Backup {{ now () .strftime ( '%Y-%m-%d' ) }} exclude Addons/Folders to exclude from the backup. Exclude Object { \"addons\" : [ \"MariaDB\" ], \"folders\" : [ \"Local add-ons\" , \"share\" ]} password Optional password to secure backup. string 1234 keep_days The number of days to keep the backup. float 2 download_path Locations to download the backup to after creation. list [ \"/usb_drive\" ]","title":"auto_backup.backup_full"},{"location":"services/#exclude-object","text":"Parameter Description Type Example addons List of addons to exclude from the backup (name or slug). list [ \"Almond\" , \"glances\" , \"core_mariadb\" ] folders List of folders to exclude from the backup. list [ \"Local add-ons\" , \"homeassistant\" , \"share\" ]","title":"Exclude Object"},{"location":"services/#auto_backupbackup_partial","text":"Create a partial backup. Parameter Description Type Example name Optional name, defaults to the current date and time. string Automatic Backup {{ now () .strftime ( '%Y-%m-%d' ) }} addons List of addons to backup (name or slug). list [ \"Almond\" , \"glances\" , \"core_mariadb\" ] folders List of folders to backup. list [ \"Local add-ons\" , \"homeassistant\" , \"share\" ] password Optional password to secure backup. string 1234 keep_days The number of days to keep the backup. float 2 download_path Locations to download the backup to after creation. list [ \"/usb_drive\" ]","title":"auto_backup.backup_partial"},{"location":"services/#auto_backuppurge","text":"Purge expired backups. There are no parameters here, just call the service, and it will remove any expired backups. This service is useful if you want to manually specify when to purge backups, such as doing a batch delete at 12AM. Info Expired backups are automatically purged when creating new backups, this can be disabled in the options menu .","title":"auto_backup.purge"},{"location":"snippets/notify-on-backup-failure/","text":"Blueprint Send notifications based on events created by the Auto Backup integration, such as when a backup fails. Notify on Backup Failure - alias : \"Notify Backup Failure\" trigger : platform : event event_type : auto_backup.backup_failed # (1) action : service : persistent_notification.create # (2) data : title : \"Backup Failed.\" message : |- Name: {{ trigger.event.data.name }} Error: {{ trigger.event.data.error }} We listen for the auto_backup.backup_failed event. Create a persistent notification on failure with the backups name and the error.","title":"Notify on backup failure"}]}